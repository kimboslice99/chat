<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Chat</title>

	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

	<link href="static/styles/style.css" rel="stylesheet" type="text/css">
	<link href="static/styles/dark.css" rel="stylesheet" type="text/css">
</head>
<body>
	<div class="chat">
		<div id="chat-box" class="chat-box">
			<div id="offline"><span class="big">Server is offline.</span><br />Sorry about that.</div>
			<ul id="msgs" class="msgs"></ul>
			<ul id="typing" class="msgs"></ul>
		</div>
		<div class="chat-audio">
			<div id="remoteAudios"></div>
			<audio id="localAudio" autoplay muted></audio>
			<div id="errorMsg" class="error" class="display-none"></div>
			<div class="display-none checkboxes" id="audioControls">
				<select class="select" id="mic-select" title="Input device">
					<option>Default device</option>
				</select>
				<label class="audio-controls">
					<span>Test Mic</span>
					<input type="checkbox" id="toggleMicPlayback">
				</label>
				<label class="audio-controls">
					<span>Mute Mic</span>
					<input type="checkbox" id="toggleMicMute">
				</label>
				<label class="audio-controls">
					<span>Mute Chat</span>
					<input type="checkbox" id="muteChat">
				</label>
				<select class="select" id="output-select" title="Output device">
					<option>Default device</option>
				</select>
			</div>
		</div>
		<div class="chat-form">
			<ul id="emic" style="display:none;"></ul>
			<button id="emic_btn">
				<img src="static/emic/white-smiling-face.png" width="20px" height="20px" title="White Smiling Face">
			</button>
			<textarea id="form_input" class="form-control" data-user-id="2" placeholder="Type something ..." rows="1"></textarea>
			<button id="send">Send</button>
			<ul id="users"></ul>
		</div>
	</div>

	<script type="text/javascript" src="socket.io/socket.io.js"></script>
	<script type="text/javascript" src="static/scripts/emic.js"></script>
	<script type="text/javascript" src="static/scripts/chat.js"></script>
	<script type="text/javascript" src="static/scripts/webrtc.js"></script>
	<script type="text/javascript">
		// optionally set own server where the client connects to
		const socket = io(location.protocol + '//' + location.host, { path: location.pathname.replace(/\/$/, '') + '/socket.io/' })

		Emic.init();
		Chat.init(socket);
		WebRTC.init();
	</script>
</body>
</html>
